# دستورات شرطی در bash

در قسمت قبلی اومدیم باهم عبارت های شرطی که بیشترین استفاده رو دارن رو بررسی کردیم، اما یاد نگرفتیم که داخل بَش چجوری ازشون استفاده کنیم!

برای اینکه بتونیم از دستورات شرطی استفاده کنیم چنتا کلمه کلیدی داریم به نام `if` ، `if-else` و `switch case` که با همدیگه تک تک اینارو بررسی میکنیم گل های تو خونه.


## دستور if - If statement

برای اینکه بتونید از دستور `if` استفاده کنید، باید به شکل زیر ازش استفاده کنید:

```bash
if [[ some_test ]]
then
    <commands>
fi
```

کلمه کلیدی `if` برای شروع شرطه و داخل براکت خود شرط رو میزارید (همونایی که تو قسمت قبلی یاد گرفتیم) بعد از براکت ها از کلمه کلیدی `then` استفاده میکنیم و دستوراتمونو اون تو میزاریم و بعد از تموم شدن دستوراتمون از کلمه کلیدی `fi` استفاده میکنیم که یعنی شرطمون تموم شده.

خب خیلی سریع بریم یه مثال بزنیم، توی مثال زیر اول از کاربر اسمش رو میگیرم و اگه طول رشته ایی که داد برابر با 0 بود بهش میگیم که اسم درستی رو وارد کنه چون هیچ اسمی 0 کارکتر نداره:

```bash
#!/bin/bash

# Bash if statement example

read -p "What is your name? " name

if [[ -z ${name} ]]
then
    echo "Please enter your name!"
fi
```

## دستور if Else - If Else statement

بعضی وقتا هم ما نیاز داریم اگه شرطمون درست بود یه کاری بکنه و اگه درست نبود یه کار دیگه، اینجاست که از `if else` استفاده میکنیم. دقیقا دستوراتش مثل بالاییه اما یه else توش اضافه شده، مثالشو ببینید:

```bash
#!/bin/bash

# Bash if else statement example

read -p "What is your name? " name

if [[ -z ${name} ]]
then
    echo "Please enter your name!"
else
    echo "Hi there ${name}"
fi
```

در مثال بالا اگه **اگه** اسمی که کاربر وارد میکنه بدون کارکتر (خالی) باشه بهش میگه که اسمتو وارد کن و **در غیر اینصورت** بهش سلام میکنه.

توی قسمت قبلی شرط های متفاوتی رو دیدیم، پس برای تمرین میتونید خیلی راحت ازشون استفاده کنید:

```bash
#!/bin/bash

admin="amirroox"

read -p "Enter your username? " username

# Check if the username provided is the admin

if [[ "${username}" == "${admin}" ]] ; then
    echo "You are the admin user!"
else
    echo "You are NOT the admin user!"
fi
```

یه مثال خیلی باحال هم این زیر داریم، که اول `User ID` رو چک میکنه و اگه برابر با 0 بود یعنی کاربر `root` عه و اینجوری نمیزاره که اسکریپت اجرا بشه:

```bash
#!/bin/bash

if (( $EUID == 0 )); then
    echo "Please do not run as root"
    exit
fi
```

اگه توجه کنید توی مثال بالا از براکت استفاده نشده و از پرانتز استفاده شده! این اشتباه نیست چون ما داریم از یه متغیر محیطی استفاده میکنیم و نیازی نداریم که از براکت استفاده کنیم.

یه مثال دیگه میزنیم با چندین شرط، از `or` استفاده میکنیم که به شکل `||` ازش استفاده میشه. و همونطور که قبلا گفتیم اگه یدونه از شرط ها درست باشه کل شرط درسته:

```bash
#!/bin/bash

admin="amirroox"

read -p "Enter your username? " username

# Check if the username provided is the admin

if [[ "${username}" != "${admin}" ]] && [[ $EUID != 0 ]] ; then
    echo "You are not the admin or root user, but please be safe!"
else
    echo "You are the admin user! This could be very destructive!"
fi
```

توی مثال بالا داریم چک میکنیم که این اسکریپت برای ادمین و برای `root` در دسترس نباشه تا فرضا آسیبی به چیزی نزنه

حالا یه زمانی هست که ما چندین شرط متفاوت داریم. مثلا یه عدد رو از یکی گرفتیم و **اگه** عددش بیشتر از 0 بود میخوایم یه چیزی بهش نمایش بدیم و **در غیر اینصورت اگه** نمرش زیر 0 بود یه چیز دیگه، و اگه هیچ کدوم از شرط ها قابل قبول نبود **در غیر اینصورت** میایم و یه چیز دیگه رو نمایش میدیم (وقتی بزرگتر و کوچیک تر از 0 نباشه یعنی خود 0 عه)، این مثال رو اینجا زدم:

تا یادم نرفته بگم که برای شرط جدید از کلمه کلیدی `elif` باید استفاده کنید:

```bash
#!/bin/bash

read -p "Enter a number: " num

if [[ $num -gt 0 ]] ; then
    echo "The number is positive"
elif [[ $num -lt 0 ]] ; then
    echo "The number is negative"
else
    echo "The number is 0"
fi
```

شما میتونید از چندین `elif` توی دستور شرطیتون استفاده کنید، اما `if` و `else` باید یدونه باشن (توی همون شرط)

## دستور سوییچ کیس - Switch case statements

حالا فرض کنید که خیلی شرط دارید و اگه از `if` استفاده کنید باید خیلی `elif` بزارید، اینجاست که میتونید از `case` استفاده کنید و حجم کدتون رو کوتاه تر کنید (نسبتا).

استفاده از `case` توی bash به این صورته:

```bash
case $some_variable in

  pattern_1)
    commands
    ;;

  pattern_2| pattern_3)
    commands
    ;;

  *)
    default commands
    ;;
esac
```

خیلی سریع بریم ببنیم این ساختار چجوریه

* همه دستورات شرطی `case` با کلمه کلیدی `case` شروع میشن
* در مرحله بعدی باید متغیر خودمون رو قرار بدیم که شرط روی اون اعمال میشه و دقیقا بعدش باید از کلمه کلیدی `in` استفاده کنیم
* توی مرحله بعدی باید الگوها یا همون شرط هامون رو مشخص کنیم، که اول شرطمون رو میزاریم و بعد یه پرانتز جلوش میزاریم
* خیلی ساده میتونید چندین شرط رو برای الگوها بزارید و با `|` باید اینکارو کنید 
* حالا که شرططون رو نوشتید داخلش دستوراتی که برای اون شرط هست رو مینویسید
* بعد تمامی دستوراتتون باید از دوتا سیمی کالن `;;` استفاده کنید تا مشخص کنید شرططون تموم شده
* حالا میتونید بقیه شرطاتون رو هم به شکل بالا بهش اضافه کنید
* و در آخر میتونید یه شرط پیشفرض هم بزارید که اگه هیچ کدوم از شرط ها درست نبود اون اجرا بشه. برای این کار باید جای الگو از `*` استفاده کنید
* و در آخر برای بستن دستور `case` از کلمه کلیدی `esac` که همون برعکس case عه استفاده کنید

هیچی مثل یه مثال نمیتونه درک درست رو بده:

```bash
#!/bin/bash

read -p "Enter the name of your car brand: " car

case $car in

  Saipa)
    echo -n "${car}'s car factory is in the Iran."
    ;;

  BMW | Mercedes | Audi | Porsche)
    echo -n "${car}'s car factory is in Germany."
    ;;

  Toyota | Mazda | Mitsubishi | Subaru)
    echo -n "${car}'s car factory is in Japan."
    ;;

  Ford | Jeep | Chevrolet | Buick | Dodge)
    echo -n "${car}'s car factory is in USA."
    ;;

  *)
    echo -n "${car} is an unknown car brand"
    ;;

esac
```

با اسکریپت بالا از کاربر میخوایم که اسم یه برند ماشین رو بزنه و بعد بررسی میکنیم اسم برند با کدوم یک از شرط های ما سازگاری داره و اگه با هیچکدوم سازگاری نداشت هم یه چیز پیشفرض براش گذاشتیم.

> فقط توجه کنید که توی دستور case نیاز نیست اسم هارو داخل تک کوتیشن `'` یا دابل کوتیشن `"` قرار بدید. همچنین توی دستور case مثل دستور if نمیتونید از عبارت های شرطی پارت قبلی استفاده کنید. توی دستور case فقط متغیر شمارو با شرط هایی که گذاشتید مقایسه میکنه و اگه برابر بود داخل اون شرط وارد میشه!

## گوش کنید خواهشا

برای اینکه درک درستی از دستورات داشته باشید، بهتره هر بخش رو تمرین کنید، با کد ها بازی کنید، شرط های مختلف رو بررسی کنید و کلا هرکاری دلتون میخواد انجام بدید، تا همینجا هم میتونید اسکریپت های جالبی بنویسید، اگه یکم خلاقیت به خرج بدید!
